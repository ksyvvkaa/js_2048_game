var r,e=Array.from(document.querySelectorAll(".field-cell")),n=[e.slice(0,4),e.slice(4,8),e.slice(8,12),e.slice(12,16)],i={win:document.querySelector(".message-win"),lose:document.querySelector(".message-lose"),start:document.querySelector(".message-start")},t=document.querySelector(".game-score"),o=document.querySelector(".button");function a(){var r=e.filter(function(r){return!r.innerHTML}),n=Math.floor(Math.random()*r.length);c(r[n],.1>Math.random()?4:2)}function c(r,e){if(!e){r.classList.remove("field-cell--".concat(r.innerHTML)),r.innerHTML="";return}if(r.innerHTML){r.classList.replace("field-cell--".concat(r.innerHTML),"field-cell--".concat(e)),r.innerHTML=e;return}r.innerHTML=e,r.classList.add("field-cell--".concat(e))}function s(r){var e=Object.values(i).find(function(r){return!r.classList.contains("hidden")});e&&e.classList.add("hidden"),r&&r.classList.remove("hidden")}function f(r){2048===r&&s(i.win)}function l(r){t.innerHTML=+t.innerHTML+r}function u(t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var c=!1;switch(r&&(o.classList.replace("start","restart"),o.innerHTML="Restart",r=!1),t.key){case"ArrowUp":for(var v=0;v<4;v++)for(var M=0;M<4;M++)for(var H=v+1;H<4;H++){var T=n[H][M].innerHTML;if(T){if(!n[v][M].innerHTML){L(n[H][M],n[v][M]),c=!0;continue}if(T===n[v][M].innerHTML){var m=2*T;d(n[H][M],n[v][M]),l(m),f(m),c=!0}break}}break;case"ArrowDown":for(var w=3;w>=0;w--)for(var h=0;h<4;h++)for(var k=w-1;k>=0;k--){var y=n[k][h].innerHTML;if(y){if(!n[w][h].innerHTML){L(n[k][h],n[w][h]),c=!0;continue}if(y===n[w][h].innerHTML){var A=2*y;d(n[k][h],n[w][h]),l(A),f(A),c=!0}break}}break;case"ArrowRight":for(var b=0;b<4;b++)for(var g=3;g>=0;g--)for(var p=g-1;p>=0;p--){var S=n[b][p].innerHTML;if(S){if(!n[b][g].innerHTML){L(n[b][p],n[b][g]),c=!0;continue}if(S===n[b][g].innerHTML){var q=2*S;d(n[b][p],n[b][g]),l(q),f(q),c=!0}break}}break;case"ArrowLeft":for(var E=0;E<4;E++)for(var R=0;R<4;R++)for(var D=R+1;D<4;D++){var U=n[E][D].innerHTML;if(U){if(!n[E][R].innerHTML){L(n[E][D],n[E][R]),c=!0;continue}if(U===n[E][R].innerHTML){var j=2*U;d(n[E][D],n[E][R]),l(j),f(j),c=!0}break}}}c?a():function(){if(e.some(function(r){return!r.innerHTML}))return!1;for(var r=0;r<4;r++)for(var i=0;i<4;i++){var t=n[r][i].innerHTML,o=[];if(n[r+1]&&o.push(n[r+1][i].innerHTML),n[r][i+1]&&o.push(n[r][i+1].innerHTML),o.includes(t))return!1}return!0}()&&(s(i.lose),document.removeEventListener("keydown",u))}}function L(r,e){c(e,r.innerHTML),c(r,"")}function d(r,e){c(e,2*r.innerHTML),c(r,"")}o.addEventListener("click",function(){e.forEach(function(r){c(r,"")}),s(),o.classList.replace("restart","start"),o.innerHTML="Start",t.innerHTML=0,r=!0,document.removeEventListener("keydown",u),a(),a(),document.addEventListener("keydown",u)});
//# sourceMappingURL=index.9f7d405f.js.map
